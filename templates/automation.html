<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automation Builder</title>
    <link href="/static/css/styles.css" rel="stylesheet">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body>
    <h1>Automation Builder</h1>
    <div id="automation_builder" class="container flex min-w-96 w-full gap-2">
        <div id="actionlist" class="border border-slate-200 rounded w-1/4 flex flex-col gap-0.5">
            <div class="action" x-data="action" x-init="constructor($el)" :id="$id('action')"
                @dragstart="dragStartHandler($event)" 
                @dragend="dragEndHandler($event)" 
                class="action pwclick" 
                draggable="true">
                <div class="grabhandle flex gap-1 items-center justify-start font-bold">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-3">
                        <path fill-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h2.25a3 3 0 0 1 3 3v2.25a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V6Zm9.75 0a3 3 0 0 1 3-3H18a3 3 0 0 1 3 3v2.25a3 3 0 0 1-3 3h-2.25a3 3 0 0 1-3-3V6ZM3 15.75a3 3 0 0 1 3-3h2.25a3 3 0 0 1 3 3V18a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3v-2.25Zm9.75 0a3 3 0 0 1 3-3H18a3 3 0 0 1 3 3V18a3 3 0 0 1-3 3h-2.25a3 3 0 0 1-3-3v-2.25Z" clip-rule="evenodd" />
                    </svg>
                    <h3>Find an element</h3>
                </div>
                <label>Get Element by
                    <select name="getby" x-model="pw_method">
                        <option disabled selected>Choose one...</option>
                        <option value="text">text</option>
                        <option value="label">label</option>
                        <option value="placeholder">placeholder</option>
                        <option value="alttext">alt text</option>
                        <option value="title">title</option>
                        <option value="attribute">attribute</option>
                    </select>
                </label>
                <label>:
                    <input type="text" x-model="pw_method_arg" pattern="" name="selector" placeholder="" />
                </label>
            </div>
        </div>
        <div
            id="target" x-data="automation"
            class="min-h-[768px] min-w-96 w-3/4 border border-slate-200 rounded"
            @drop="dropHandler($event)" @dragover="dragOverHandler($event)"
        >
            <div class="flex items-center justify-around p-2 border-b border-slate-300">
                <p>Drag and drop actions into the list to create an automation.</p>
                <button class="clear border border-slate-400 bg-slate-50 rounded p-1"
                    @click="console.log($data.action_list)">Log actions</button>
                <button class="clear border border-slate-400 bg-slate-50 rounded p-1"
                    @click="clearList">Clear all</button>
            </div>
        </div>
    </div>
    <form action="/test-automation/lincat" class="flex w-full justify-center">
        <fieldset class="flex-row max-w-screen-sm w-96">
            <button class="bg-slate-200 text-slate-500">Cancel</button>
            <button>Save & Test</button>
        </fieldset>
    </form>
    
    <script type="text/javascript" src="../static/js/dragndrop.js"></script>
</body>
</html>